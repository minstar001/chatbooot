{
  "_args": [
    [
      {
        "raw": "@lerna/publish@4.0.0",
        "scope": "@lerna",
        "escapedName": "@lerna%2fpublish",
        "name": "@lerna/publish",
        "rawSpec": "4.0.0",
        "spec": "4.0.0",
        "type": "version"
      },
      "/usr/local/apache/htdocs/node_modules/lerna"
    ]
  ],
  "_from": "@lerna/publish@4.0.0",
  "_hasShrinkwrap": false,
  "_id": "@lerna/publish@4.0.0",
  "_inCache": true,
  "_location": "/@lerna/publish",
  "_nodeVersion": "14.15.5",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/publish_4.0.0_1612996947585_0.43166505649005393"
  },
  "_npmUser": {
    "name": "evocateur",
    "email": "daniel.stockman@gmail.com"
  },
  "_npmVersion": "lerna/4.0.0/node@v14.15.5+x64 (darwin)",
  "_phantomChildren": {
    "@npmcli/ci-detect": "1.4.0",
    "agent-base": "6.0.2",
    "agentkeepalive": "4.2.0",
    "cacache": "15.3.0",
    "debug": "4.3.3",
    "http-cache-semantics": "4.1.0",
    "http-proxy-agent": "4.0.1",
    "https-proxy-agent": "5.0.0",
    "is-lambda": "1.0.1",
    "lru-cache": "6.0.0",
    "minipass-collect": "1.0.2",
    "minipass-fetch": "1.4.1",
    "minipass-flush": "1.0.5",
    "minipass-json-stream": "1.0.1",
    "minipass-pipeline": "1.2.4",
    "npm-package-arg": "8.1.5",
    "promise-retry": "2.0.1",
    "socks": "2.6.1",
    "ssri": "8.0.1",
    "yallist": "4.0.0"
  },
  "_requested": {
    "raw": "@lerna/publish@4.0.0",
    "scope": "@lerna",
    "escapedName": "@lerna%2fpublish",
    "name": "@lerna/publish",
    "rawSpec": "4.0.0",
    "spec": "4.0.0",
    "type": "version"
  },
  "_requiredBy": [
    "/lerna"
  ],
  "_resolved": "https://registry.npmjs.org/@lerna/publish/-/publish-4.0.0.tgz",
  "_shasum": "f67011305adeba120066a3b6d984a5bb5fceef65",
  "_shrinkwrap": null,
  "_spec": "@lerna/publish@4.0.0",
  "_where": "/usr/local/apache/htdocs/node_modules/lerna",
  "author": {
    "name": "Daniel Stockman",
    "url": "https://github.com/evocateur"
  },
  "bugs": {
    "url": "https://github.com/lerna/lerna/issues"
  },
  "dependencies": {
    "@lerna/check-working-tree": "4.0.0",
    "@lerna/child-process": "4.0.0",
    "@lerna/collect-updates": "4.0.0",
    "@lerna/command": "4.0.0",
    "@lerna/describe-ref": "4.0.0",
    "@lerna/log-packed": "4.0.0",
    "@lerna/npm-conf": "4.0.0",
    "@lerna/npm-dist-tag": "4.0.0",
    "@lerna/npm-publish": "4.0.0",
    "@lerna/otplease": "4.0.0",
    "@lerna/output": "4.0.0",
    "@lerna/pack-directory": "4.0.0",
    "@lerna/prerelease-id-from-version": "4.0.0",
    "@lerna/prompt": "4.0.0",
    "@lerna/pulse-till-done": "4.0.0",
    "@lerna/run-lifecycle": "4.0.0",
    "@lerna/run-topologically": "4.0.0",
    "@lerna/validation-error": "4.0.0",
    "@lerna/version": "4.0.0",
    "fs-extra": "^9.1.0",
    "libnpmaccess": "^4.0.1",
    "npm-package-arg": "^8.1.0",
    "npm-registry-fetch": "^9.0.0",
    "npmlog": "^4.1.2",
    "p-map": "^4.0.0",
    "p-pipe": "^3.1.0",
    "pacote": "^11.2.6",
    "semver": "^7.3.4"
  },
  "description": "Publish packages in the current project",
  "devDependencies": {},
  "directories": {},
  "dist": {
    "integrity": "sha512-K8jpqjHrChH22qtkytA5GRKIVFEtqBF6JWj1I8dWZtHs4Jywn8yB1jQ3BAMLhqmDJjWJtRck0KXhQQKzDK2UPg==",
    "shasum": "f67011305adeba120066a3b6d984a5bb5fceef65",
    "tarball": "https://registry.npmjs.org/@lerna/publish/-/publish-4.0.0.tgz",
    "fileCount": 20,
    "unpackedSize": 106916,
    "npm-signature": "-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgJGFUCRA9TVsSAnZWagAAvEQP/0Nc8agxAnJni7kBYwDV\nLzUPNttHkq2j8diWxnNbvMUNNwwqJ+U6Dw7zhs9FE6OZfnYS/9wp+HPDE14L\nSuzqIKTtiG5YvQpZR/h2wAJuhVTYtWlsK7hotlDYE63mZ5OY6lykGar8Mp2F\n7ACWFPiDbbZU3uhLAELZXaaJUfgMEVE394L0lJk0eRu1PMVUCYo/p6OC66nt\ntmkjY2hEDzMri3g8IT9k+9Vl8Z9kFe/6CmhX8bwGJ8RX1m43I2oKjpupwGVF\nK84zznRyPiC2gPQlKX7SGHvcZqbzys0K4XnESdgNoRR4TX+77creigT3UP9V\nRTzhjmD59QR9Lsult5moS1pC9/vx1cavZgdLTW6FiWooNJmOon95KTRRQs4Q\nHcJanUBMmR8pmmQKaW9XkTd1Sk7NgO9f5sWzn2iaoSU2uhKC3HUcFW1Ctbtk\nY8C/IaUCk4TIkpl4FbMQPZUadDuOev1+BHa9N40ruS3EkS1bfrxmY7O8j9PO\n6pDJQ0/4FoQRfC+t0/cvCZ/r5kEeAxsJeJi7IM7i1Auq+Xk1pHwI37vTpYWf\noIDg+eLOPODogoCmp5JF26F3VmJ5Zv4bFoHX/D3i97UfDR4DhTAwpWb/UXrE\n2xus5dT1OrK+WYrpiJM5rNY/x+FXh8BoJTquX9k5cQK1+tFP0NNV1ICG5lMy\nOH3G\r\n=/080\r\n-----END PGP SIGNATURE-----\r\n"
  },
  "engines": {
    "node": ">= 10.18.0"
  },
  "gitHead": "4582c476e07dddddd6b2e3ab6e7f52c1f9eed59a",
  "homepage": "https://github.com/lerna/lerna/tree/master/commands/publish#readme",
  "keywords": [
    "lerna",
    "command"
  ],
  "license": "MIT",
  "main": "index.js",
  "maintainers": [
    {
      "name": "hzoo",
      "email": "hi@henryzoo.com"
    },
    {
      "name": "evocateur",
      "email": "daniel.stockman@gmail.com"
    }
  ],
  "name": "@lerna/publish",
  "optionalDependencies": {},
  "publishConfig": {
    "access": "public"
  },
  "readme": "# `@lerna/publish`\n\n> Publish packages in the current project\n\nInstall [lerna](https://www.npmjs.com/package/lerna) for access to the `lerna` CLI.\n\n## Usage\n\n```sh\nlerna publish              # publish packages that have changed since the last release\nlerna publish from-git     # explicitly publish packages tagged in the current commit\nlerna publish from-package # explicitly publish packages where the latest version is not present in the registry\n```\n\nWhen run, this command does one of the following things:\n\n- Publish packages updated since the last release (calling [`lerna version`](https://github.com/lerna/lerna/tree/main/commands/version#readme) behind the scenes).\n  - This is the legacy behavior of lerna 2.x\n- Publish packages tagged in the current commit (`from-git`).\n- Publish packages in the latest commit where the version is not present in the registry (`from-package`).\n- Publish an unversioned \"canary\" release of packages (and their dependents) updated in the previous commit.\n\n> Lerna will never publish packages which are marked as private (`\"private\": true` in the `package.json`).\n\nDuring all publish operations, appropriate [lifecycle scripts](#lifecycle-scripts) are called in the root and per-package (unless disabled by [`--ignore-scripts](#--ignore-scripts)).\n\nCheck out [Per-Package Configuration](#per-package-configuration) for more details about publishing scoped packages, custom registries, and custom dist-tags.\n\n## Positionals\n\n### bump `from-git`\n\nIn addition to the semver keywords supported by [`lerna version`](https://github.com/lerna/lerna/tree/main/commands/version#positionals),\n`lerna publish` also supports the `from-git` keyword.\nThis will identify packages tagged by `lerna version` and publish them to npm.\nThis is useful in CI scenarios where you wish to manually increment versions,\nbut have the package contents themselves consistently published by an automated process.\n\n### bump `from-package`\n\nSimilar to the `from-git` keyword except the list of packages to publish is determined by inspecting each `package.json`\nand determining if any package version is not present in the registry. Any versions not present in the registry will\nbe published.\nThis is useful when a previous `lerna publish` failed to publish all packages to the registry.\n\n## Options\n\n`lerna publish` supports all of the options provided by [`lerna version`](https://github.com/lerna/lerna/tree/main/commands/version#options) in addition to the following:\n\n- [`--canary`](#--canary)\n- [`--contents <dir>`](#--contents-dir)\n- [`--dist-tag <tag>`](#--dist-tag-tag)\n- [`--git-head <sha>`](#--git-head-sha)\n- [`--graph-type <all|dependencies>`](#--graph-type-alldependencies)\n- [`--ignore-scripts`](#--ignore-scripts)\n- [`--ignore-prepublish`](#--ignore-prepublish)\n- [`--legacy-auth`](#--legacy-auth)\n- [`--no-git-reset`](#--no-git-reset)\n- [`--no-granular-pathspec`](#--no-granular-pathspec)\n- [`--no-verify-access`](#--no-verify-access)\n- [`--otp`](#--otp)\n- [`--preid`](#--preid)\n- [`--pre-dist-tag <tag>`](#--pre-dist-tag-tag)\n- [`--registry <url>`](#--registry-url)\n- [`--tag-version-prefix`](#--tag-version-prefix)\n- [`--temp-tag`](#--temp-tag)\n- [`--yes`](#--yes)\n\n### `--canary`\n\n```sh\nlerna publish --canary\n# 1.0.0 => 1.0.1-alpha.0+${SHA} of packages changed since the previous commit\n# a subsequent canary publish will yield 1.0.1-alpha.1+${SHA}, etc\n\nlerna publish --canary --preid beta\n# 1.0.0 => 1.0.1-beta.0+${SHA}\n\n# The following are equivalent:\nlerna publish --canary minor\nlerna publish --canary preminor\n# 1.0.0 => 1.1.0-alpha.0+${SHA}\n```\n\nWhen run with this flag, `lerna publish` publishes packages in a more granular way (per commit).\nBefore publishing to npm, it creates the new `version` tag by taking the current `version`, bumping it to the next _minor_ version, adding the provided meta suffix (defaults to `alpha`) and appending the current git sha (ex: `1.0.0` becomes `1.1.0-alpha.0+81e3b443`).\n\nIf you have publish canary releases from multiple active development branches in CI,\nit is recommended to customize the [`--preid`](#--preid) and [`--dist-tag <tag>`](#--dist-tag-tag) on a per-branch basis to avoid clashing versions.\n\n> The intended use case for this flag is a per commit level release or nightly release.\n\n### `--contents <dir>`\n\nSubdirectory to publish. Must apply to ALL packages, and MUST contain a package.json file.\nPackage lifecycles will still be run in the original leaf directory.\nYou should probably use one of those lifecycles (`prepare`, `prepublishOnly`, or `prepack`) to _create_ the subdirectory and whatnot.\n\nIf you're into unnecessarily complicated publishing, this will give you joy.\n\n```sh\nlerna publish --contents dist\n# publish the \"dist\" subfolder of every Lerna-managed leaf package\n```\n\n**NOTE:** You should wait until the `postpublish` lifecycle phase (root or leaf) to clean up this generated subdirectory,\nas the generated package.json is used during package upload (_after_ `postpack`).\n\n### `--dist-tag <tag>`\n\n```sh\nlerna publish --dist-tag next\n```\n\nWhen run with this flag, `lerna publish` will publish to npm with the given npm [dist-tag](https://docs.npmjs.com/cli/dist-tag) (defaults to `latest`).\n\nThis option can be used to publish a [`prerelease`](http://carrot.is/coding/npm_prerelease) or `beta` version under a non-`latest` dist-tag, helping consumers avoid automatically upgrading to prerelease-quality code.\n\n> Note: the `latest` tag is the one that is used when a user runs `npm install my-package`.\n> To install a different tag, a user can run `npm install my-package@prerelease`.\n\n### `--git-head <sha>`\n\nExplicit SHA to set as [`gitHead`](https://git.io/fh7np) on manifests when packing tarballs, only allowed with [`from-package`](#bump-from-package) positional.\n\nFor example, when publishing from AWS CodeBuild (where `git` is not available),\nyou could use this option to pass the appropriate [environment variable](https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-env-vars.html) to use for this package metadata:\n\n```sh\nlerna publish from-package --git-head ${CODEBUILD_RESOLVED_SOURCE_VERSION}\n```\n\nUnder all other circumstances, this value is derived from a local `git` command.\n\n### `--graph-type <all|dependencies>`\n\nSet which kind of dependencies to use when building a package graph. The default value is `dependencies`, whereby only packages listed in the `dependencies` section of a package's `package.json` are included. Pass `all` to include both `dependencies` _and_ `devDependencies` when constructing the package graph and determining topological order.\n\nWhen using traditional peer + dev dependency pairs, this option should be configured to `all` so the peers are always published before their dependents.\n\n```sh\nlerna publish --graph-type all\n```\n\nConfigured via `lerna.json`:\n\n```json\n{\n  \"command\": {\n    \"publish\": {\n      \"graphType\": \"all\"\n    }\n  }\n}\n```\n\n### `--ignore-scripts`\n\nWhen passed, this flag will disable running [lifecycle scripts](#lifecycle-scripts) during `lerna publish`.\n\n### `--ignore-prepublish`\n\nWhen passed, this flag will disable running [deprecated](https://docs.npmjs.com/misc/scripts#prepublish-and-prepare) [`prepublish` scripts](#lifecycle-scripts) during `lerna publish`.\n\n### `--legacy-auth`\n\nWhen publishing packages that require authentication but you are working with an internally hosted NPM Registry that only uses the legacy Base64 version of username:password. This is the same as the NPM publish `_auth` flag.\n\n```sh\nlerna publish --legacy-auth aGk6bW9t\n```\n\n### `--no-git-reset`\n\nBy default, `lerna publish` ensures any changes to the working tree have been reset.\n\nTo avoid this, pass `--no-git-reset`. This can be especially useful when used as part of a CI pipeline in conjunction with the `--canary` flag. For instance, the `package.json` version numbers which have been bumped may need to be used in subsequent CI pipeline steps (such as Docker builds).\n\n```sh\nlerna publish --no-git-reset\n```\n\n### `--no-granular-pathspec`\n\nBy default, `lerna publish` will attempt (if enabled) to `git checkout` _only_ the leaf package manifests that are temporarily modified during the publishing process. This yields the equivalent of `git checkout -- packages/*/package.json`, but tailored to _exactly_ what changed.\n\nIf you **know** you need different behavior, you'll understand: Pass `--no-granular-pathspec` to make the git command _literally_ `git checkout -- .`. By opting into this [pathspec](https://git-scm.com/docs/gitglossary#Documentation/gitglossary.txt-aiddefpathspecapathspec), you must have all intentionally unversioned content properly ignored.\n\nThis option makes the most sense configured in lerna.json, as you really don't want to mess it up:\n\n```json\n{\n  \"version\": \"independent\",\n  \"granularPathspec\": false\n}\n```\n\nThe root-level configuration is intentional, as this also covers the [identically-named option in `lerna version`](https://github.com/lerna/lerna/tree/main/commands/version#--no-granular-pathspec).\n\n### `--no-verify-access`\n\nBy default, `lerna` will verify the logged-in npm user's access to the packages about to be published. Passing this flag will disable that check.\n\nIf you are using a third-party registry that does not support `npm access ls-packages`, you will need to pass this flag (or set `command.publish.verifyAccess` to `false` in lerna.json).\n\n> Please use with caution\n\n### `--otp`\n\nWhen publishing packages that require two-factor authentication, you can specify a [one-time password](https://docs.npmjs.com/about-two-factor-authentication) using `--otp`:\n\n```sh\nlerna publish --otp 123456\n```\n\n> Please keep in mind that one-time passwords expire within 30 seconds of their generation. If it expires during publish operations, a prompt will request a refreshed value before continuing.\n\n### `--preid`\n\nUnlike the `lerna version` option of the same name, this option only applies to [`--canary`](#--canary) version calculation.\n\n```sh\nlerna publish --canary\n# uses the next semantic prerelease version, e.g.\n# 1.0.0 => 1.0.1-alpha.0\n\nlerna publish --canary --preid next\n# uses the next semantic prerelease version with a specific prerelease identifier, e.g.\n# 1.0.0 => 1.0.1-next.0\n```\n\nWhen run with this flag, `lerna publish --canary` will increment `premajor`, `preminor`, `prepatch`, or `prerelease` semver\nbumps using the specified [prerelease identifier](http://semver.org/#spec-item-9).\n\n### `--pre-dist-tag <tag>`\n\n```sh\nlerna publish --pre-dist-tag next\n```\n\nWorks the same as [`--dist-tag`](#--dist-tag-tag), except only applies to packages being released with a prerelease version.\n\n### `--registry <url>`\n\nWhen run with this flag, forwarded npm commands will use the specified registry for your package(s).\n\nThis is useful if you do not want to explicitly set up your registry\nconfiguration in all of your package.json files individually when e.g. using\nprivate registries.\n\n### `--tag-version-prefix`\n\nThis option allows to provide custom prefix instead of the default one: `v`.\n\nKeep in mind, if splitting `lerna version` and `lerna publish`, you need to pass it to both commands:\n\n```bash\n# locally\nlerna version --tag-version-prefix=''\n\n# on ci\nlerna publish from-git --tag-version-prefix=''\n```\n\nYou could also configure this at the root level of lerna.json, applying to both commands equally:\n\n```json\n{\n  \"tagVersionPrefix\": \"\",\n  \"packages\": [\"packages/*\"],\n  \"version\": \"independent\"\n}\n```\n\n### `--temp-tag`\n\nWhen passed, this flag will alter the default publish process by first publishing\nall changed packages to a temporary dist-tag (`lerna-temp`) and then moving the\nnew version(s) to the dist-tag configured by [`--dist-tag`](#--dist-tag-tag) (default `latest`).\n\nThis is not generally necessary, as Lerna will publish packages in topological\norder (all dependencies before dependents) by default.\n\n### `--yes`\n\n```sh\nlerna publish --canary --yes\n# skips `Are you sure you want to publish the above changes?`\n```\n\nWhen run with this flag, `lerna publish` will skip all confirmation prompts.\nUseful in [Continuous integration (CI)](https://en.wikipedia.org/wiki/Continuous_integration) to automatically answer the publish confirmation prompt.\n\n## Deprecated Options\n\n### `--skip-npm`\n\nCall [`lerna version`](https://github.com/lerna/lerna/tree/main/commands/version#readme) directly, instead.\n\n## Per-Package Configuration\n\nA leaf package can be configured with special [`publishConfig`](https://docs.npmjs.com/files/package.json#publishconfig) that in _certain_ circumstances changes the behavior of `lerna publish`.\n\n### `publishConfig.access`\n\nTo publish packages with a scope (e.g., `@mycompany/rocks`), you must set [`access`](https://docs.npmjs.com/misc/config#access):\n\n```json\n  \"publishConfig\": {\n    \"access\": \"public\"\n  }\n```\n\n- If this field is set for a package _without_ a scope, it **will** fail.\n- If you _want_ your scoped package to remain private (i.e., `\"restricted\"`), there is no need to set this value.\n\n  Note that this is **not** the same as setting `\"private\": true` in a leaf package; if the `private` field is set, that package will _never_ be published under any circumstances.\n\n### `publishConfig.registry`\n\nYou can customize the registry on a per-package basis by setting [`registry`](https://docs.npmjs.com/misc/config#registry):\n\n```json\n  \"publishConfig\": {\n    \"registry\": \"http://my-awesome-registry.com/\"\n  }\n```\n\n- Passing [`--registry`](#--registry-url) applies globally, and in some cases isn't what you want.\n\n### `publishConfig.tag`\n\nYou can customize the dist-tag on a per-package basis by setting [`tag`](https://docs.npmjs.com/misc/config#tag):\n\n```json\n  \"publishConfig\": {\n    \"tag\": \"flippin-sweet\"\n  }\n```\n\n- Passing [`--dist-tag`](#--dist-tag-tag) will _overwrite_ this value.\n- This value is _always_ ignored when [`--canary`](#--canary) is passed.\n\n### `publishConfig.directory`\n\nThis _non-standard_ field allows you to customize the published subdirectory just like [`--contents`](#--contents-dir), but on a per-package basis. All other caveats of `--contents` still apply.\n\n```json\n  \"publishConfig\": {\n    \"directory\": \"dist\"\n  }\n```\n\n<a id=\"lifecycle-events\"><!-- back-compat with previous heading --></a>\n\n## Lifecycle Scripts\n\n```js\n// prepublish:      Run BEFORE the package is packed and published.\n// prepare:         Run BEFORE the package is packed and published, AFTER prepublish, BEFORE prepublishOnly.\n// prepublishOnly:  Run BEFORE the package is packed and published, ONLY on npm publish.\n// prepack:     Run BEFORE a tarball is packed.\n// postpack:    Run AFTER the tarball has been generated and moved to its final destination.\n// publish:     Run AFTER the package is published.\n// postpublish: Run AFTER the package is published.\n```\n\nLerna will run [npm lifecycle scripts](https://docs.npmjs.com/misc/scripts#description) during `lerna publish` in the following order:\n\n1. If versioning implicitly, run all [version lifecycle scripts](https://github.com/lerna/lerna/tree/main/commands/version#lifecycle-scripts)\n2. Run `prepublish` lifecycle in root, if [enabled](#--ignore-prepublish)\n3. Run `prepare` lifecycle in root\n4. Run `prepublishOnly` lifecycle in root\n5. Run `prepack` lifecycle in root\n6. For each changed package, in topological order (all dependencies before dependents):\n   1. Run `prepublish` lifecycle, if [enabled](#--ignore-prepublish)\n   2. Run `prepare` lifecycle\n   3. Run `prepublishOnly` lifecycle\n   4. Run `prepack` lifecycle\n   5. Create package tarball in temp directory via [JS API](https://github.com/lerna/lerna/tree/main/utils/pack-directory#readme)\n   6. Run `postpack` lifecycle\n7. Run `postpack` lifecycle in root\n8. For each changed package, in topological order (all dependencies before dependents):\n   1. Publish package to configured [registry](#--registry-url) via [JS API](https://github.com/lerna/lerna/tree/main/utils/npm-publish#readme)\n   2. Run `publish` lifecycle\n   3. Run `postpublish` lifecycle\n9. Run `publish` lifecycle in root\n   - To avoid recursive calls, don't use this root lifecycle to run `lerna publish`\n10. Run `postpublish` lifecycle in root\n11. Update temporary dist-tag to latest, if [enabled](#--temp-tag)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/lerna/lerna.git",
    "directory": "commands/publish"
  },
  "scripts": {
    "test": "echo \"Run tests from root\" && exit 1"
  },
  "version": "4.0.0",
  "warnings": [
    {
      "code": "ENOTSUP",
      "required": {
        "node": ">= 10.18.0"
      },
      "pkgid": "@lerna/publish@4.0.0"
    }
  ]
}
